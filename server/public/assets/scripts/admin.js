/*! portfolio 2016-10-05 */
var app=angular.module("MyAdmin",["angularTrix","ngAria","ngAnimate","ngMaterial","vModal"]);app.factory("DataService",["$http",function(a){var b={},c=function(){a.get("/admin/all").then(function(a){b.data=a.data})};c();var d={},e=function(a){var c=b.data.find(function(b){return b.id===a});d.data=void 0===a?{}:c};return{modalShare:e,modalData:d,result:b,GetPosts:c}}]),app.factory("MyModal",["vModal",function(a){return a({controller:"ModalController",templateUrl:"views/edit_modal.html"})}]),app.controller("ModalController",["MyModal","DataService","$http","$scope","$window",function(a,b,c,d,e){d.close=function(){a.deactivate(),b.modalShare()},d.modalData=b.modalData.data,d.trixInitialize=function(a,c){c.setSelectedRange([0,0]),c.insertHTML(d.modalData.body),d.modalTitle=b.modalData.data.title},d.submit=function(){d.modalTitle&&d.modalBody&&c.put("/admin/edit/"+b.modalData.data.id,{title:d.modalTitle,body:d.modalBody}).then(function(a){200!=a.status?alert("Error updating database"):e.location.href="/blog/"+b.modalData.data.id})}}]),app.controller("PostListController",["DataService","$scope","MyModal",function(a,b,c){b.edit=function(b){c.activate(),a.modalShare(b)},b.modalData=a.modalData.data}]),app.controller("NewPostController",["DataService","$scope","$http","$window",function(a,b,c,d){createStorageKey=function(a){var b,c,d;return b=new Date,c=b.toISOString().slice(0,10),d=b.getTime(),"tmp/"+c+"/"+d+"-"+a.name},b.submit=function(){b.title&&b.body&&c.post("/admin/new",{title:b.title,body:b.body}).then(function(b){a.GetPosts(),d.location.href="/blog/latest"})}}]);